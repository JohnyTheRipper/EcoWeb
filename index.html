<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Platformer Game</title>
<style>
    body, html {
        margin: 0;
        padding: 0;
        overflow: hidden;
        height: 100%;
    }
    canvas {
        display: block;
        margin: auto;
        background-color: #fff;
        border: 1px solid #000;
    }
</style>
</head>
<body>
<canvas id="gameCanvas"></canvas>
<script>
    // Get the canvas element
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');

    // Set canvas size to match screen size
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    // Player properties
    const playerWidth = 50;
    const playerHeight = 50;
    let playerX = canvas.width / 2 - playerWidth / 2;
    let playerY = canvas.height - playerHeight;
    let playerSpeed = 5;
    let gravity = 0.5; // Lower gravity for smoother jumping
    let jumpStrength = 10; // Lower jump strength for smoother jumping
    let jumpVelocity = 0;
    let isJumping = false;

    // Platform properties
    const platformWidth = 100;
    const platformHeight = 20;
    const platforms = [
        { x: 100, y: canvas.height - 100 },
        { x: 300, y: canvas.height - 200 },
        { x: 500, y: canvas.height - 150 },
        { x: 700, y: canvas.height - 250 },
    ];

    // Handle keyboard input
    const keys = [];
    window.addEventListener('keydown', (e) => {
        keys[e.keyCode] = true;
    });
    window.addEventListener('keyup', (e) => {
        keys[e.keyCode] = false;
    });

    // Update player position
    function updatePlayer() {
        // Move left
        if ((keys[37] || keys[65]) && playerX > 0) { // Left arrow or A key
            playerX -= playerSpeed;
        }
        // Move right
        if ((keys[39] || keys[68]) && playerX < canvas.width - playerWidth) { // Right arrow or D key
            playerX += playerSpeed;
        }
        // Jump
        if ((keys[32] || keys[38]) && !isJumping) { // Spacebar or Up arrow
            isJumping = true;
            jumpVelocity = -jumpStrength; // Start with negative velocity for upward movement
        }

        // Update jump velocity
        if (isJumping) {
            playerY += jumpVelocity;
            jumpVelocity += gravity; // Apply gravity to reduce jump velocity
        }
        
        // Collision with ground
        if (playerY + playerHeight > canvas.height) {
            playerY = canvas.height - playerHeight;
            isJumping = false;
            jumpVelocity = 0;
        }

        // Collision with platforms
        platforms.forEach(platform => {
            if (
                playerX < platform.x + platformWidth &&
                playerX + playerWidth > platform.x &&
                playerY + playerHeight > platform.y &&
                playerY < platform.y + platformHeight
            ) {
                // If player collides with a platform, stop jumping and reset Y position
                playerY = platform.y - playerHeight;
                isJumping = false;
                jumpVelocity = 0;
            }
        });

        // Draw player
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = '#f00';
        ctx.fillRect(playerX, playerY, playerWidth, playerHeight);

        // Draw platforms
        ctx.fillStyle = '#00f';
        platforms.forEach(platform => {
            ctx.fillRect(platform.x, platform.y, platformWidth, platformHeight);
        });

        // Request animation frame
        requestAnimationFrame(updatePlayer);
    }

    // Start the game loop
    updatePlayer();
</script>
</body>
</html>
